<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Deck Builder - Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span>PokéDeck Builder</span>
            </div>
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link active">Dashboard</a>
                <a href="mydecks.html" class="nav-link">My Decks</a>
                <a href="browseCard.html" class="nav-link">Browse Cards</a>
                <a href="collection.html" class="nav-link">Collection</a>
                <a href="profile.html" class="nav-link">Profile</a>
                <a href="LoginPage.html" class="nav-link logout">Logout</a>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h1>Welcome back, Trainer!</h1>
        </div>

        <!-- Quick Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-content">
                    <h3>Total Decks</h3>
                    <p class="stat-number" id="deck-count">...</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-content">
                    <h3>Cards Collected</h3>
                    <p class="stat-number" id="card-count">...</p>
                </div>
            </div>
        </div>

        <div class="content-grid">
            <div class="content-card full-width">
                <h2>Recent Decks</h2>
                <div class="deck-list" id="recent-decks">
                    <p>Loading...</p>
                </div>
                <button class="action-btn" onclick="location.href='mydecks.html'">View All Decks</button>
            </div>
        </div>
    </div>

    <script>
        // Fetch data from PHP
        fetch('dashboard.php')
            .then(response => response.json())
            .then(data => {
                document.getElementById('deck-count').textContent = data.deck_count;
                document.getElementById('card-count').textContent = data.card_count;

                const deckList = document.getElementById('recent-decks');
                deckList.innerHTML = '';

                if (data.recent_decks.length === 0) {
                    deckList.innerHTML = '<p>No decks yet.</p>';
                } else {
                    data.recent_decks.forEach(deck => {
                        const div = document.createElement('div');
                        div.className = 'deck-item';
                        div.innerHTML = `
                            <div class="deck-info">
                                <h4>${deck.deck_name}</h4>
                                <p>${deck.deck_type || 'Unknown'} • ${deck.total_cards} cards</p>
                            </div>
                        `;
                        deckList.appendChild(div);
                    });
                }
            })
            .catch(error => {
                console.error('Failed to fetch dashboard stats:', error);
            });
    </script>
</body>
</html>
